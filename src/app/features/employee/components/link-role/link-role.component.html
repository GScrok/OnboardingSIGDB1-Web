<div class="page-container">
  <h2 class="mb-4">Vincular cargo</h2>

  <form [formGroup]="employeeRoleForm" (ngSubmit)="onSave()" class="form-card">
    <div class="row">
      <div class="col-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label class="user-select-none">Funcionário</mat-label>
          <input disabled class="pe-none" matInput [value]="employee!.name" readonly/>
        </mat-form-field>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Cargo</mat-label>
          <mat-select formControlName="roleId">
            <mat-option [value]="null">-- Selecione um cargo --</mat-option>

            <mat-option *ngFor="let role of roles" [value]="role.id">
              {{ role.description }}
            </mat-option>
          </mat-select>
          <mat-error id="errorRoleIdRequired"
            *ngIf="employeeRoleForm.get('roleId')?.hasError('required')"
            >Campo obrigatório</mat-error
          >
        </mat-form-field>
      </div>

      <div class="col-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Data início</mat-label>
          <input
            matInput
            [matDatepicker]="picker"
            formControlName="startDate"
            readonly
            (click)="picker.open()"
          />
          <mat-datepicker-toggle
            matIconSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>

          <mat-error id="errorStartDateRequired"
            *ngIf="employeeRoleForm.get('startDate')?.hasError('required')"
            >Campo obrigatório</mat-error
          >
        </mat-form-field>
      </div>
    </div>

    <div class="d-flex gap-2 mt-3">
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="employeeRoleForm.invalid"
      >
        Salvar
      </button>
      <button mat-raised-button type="button" (click)="onCancel()">
        Voltar
      </button>
    </div>
  </form>
</div>
